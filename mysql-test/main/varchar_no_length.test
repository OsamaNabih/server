#
# Test for SQL Standard T081: "Optional string types maximum length"
# This tests the feature that allows VARCHAR columns to be created without
# specifying a length, defaulting to the maximum VARCHAR length (65535)
#

--echo #
--echo # SQL Standard T081: VARCHAR without explicit length specification
--echo #

--echo #
--echo # Basic test: CREATE TABLE with VARCHAR without length or charset
--echo #

CREATE TABLE t1 (a VARCHAR);
SHOW CREATE TABLE t1;
DESC t1;

--echo # Verify we can insert and retrieve data
INSERT INTO t1 VALUES ('test string');
INSERT INTO t1 VALUES ('');
INSERT INTO t1 VALUES (NULL);
SELECT * FROM t1;

DROP TABLE t1;

--echo #
--echo # Test VARCHAR without length with various column charsets
--echo #

CREATE TABLE t1 (a VARCHAR CHARSET utf8mb4);
SHOW CREATE TABLE t1;
DROP TABLE t1;

CREATE TABLE t1 (a VARCHAR CHARSET latin1);
SHOW CREATE TABLE t1;
DROP TABLE t1;

--echo #
--echo # Basic test: CREATE TABLE with charset
--echo #

CREATE TABLE t1 (a VARCHAR) CHARSET latin1;
SHOW CREATE TABLE t1;
DROP TABLE t1;
